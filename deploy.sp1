# è‡ªåŠ¨éƒ¨ç½² Hugo åšå®¢åˆ° GitHub Pages

# 1. è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
Set-Location -Path "D:\hugo\myblog"

# 2. ç”Ÿæˆé™æ€é¡µé¢ï¼ˆ-D è¡¨ç¤ºåŒ…å«è‰ç¨¿ï¼‰
Write-Host "ğŸ‘‰ æ­£åœ¨ç”Ÿæˆé™æ€é¡µé¢..."
hugo -D

if ($LASTEXITCODE -ne 0) {
    Write-Host "âŒ Hugo æ„å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®ã€‚"
    exit 1
}

# 3. è¿›å…¥ public æ–‡ä»¶å¤¹ï¼ˆHugo é»˜è®¤è¾“å‡ºç›®å½•ï¼‰
Set-Location .\public

# 4. å¦‚æœ public ä¸æ˜¯ git ä»“åº“ï¼Œå°±åˆå§‹åŒ–å¹¶å…³è”è¿œç¨‹
if (!(Test-Path ".git")) {
    git init
    git branch -M main
    # âš ï¸ ä¿®æ”¹ä¸ºä½ çš„ GitHub Pages ä»“åº“åœ°å€
    git remote add origin https://github.com/youzjuzi/my-hugo-blog.git
}

# 5. æäº¤å¹¶æ¨é€åˆ° GitHub
Write-Host "ğŸ‘‰ æäº¤å¹¶æ¨é€åˆ° GitHub Pages..."
git add .
git commit -m "ğŸš€ deploy blog at $(Get-Date -Format 'yyyy-MM-dd HH:mm:ss')"
git push origin main --force

# 6. å›åˆ°é¡¹ç›®æ ¹ç›®å½•
Set-Location ..

Write-Host "âœ… éƒ¨ç½²å®Œæˆï¼ä½ çš„åšå®¢å·²æ›´æ–°åˆ° GitHub Pagesã€‚"
